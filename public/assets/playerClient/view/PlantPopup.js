/*
 * File: app/view/PlantPopup.js
 */
//------------------------------------------------------------------------------
Ext.define("Biofuels.view.PlantPopup",{createForSurface:function(e,t,n){var r=[{type:"circle",x:t+25,y:n,radius:30,fill:"#000",opacity:.2,zIndex:1800},{type:"circle",x:t+25,y:n,radius:50,fill:"#000",opacity:.15,zIndex:1900},{type:"circle",x:t+25,y:n,radius:80,fill:"#000",opacity:.15,zIndex:2e3}],i=[{type:"image",src:"resources/grass_icon.png",x:t-25,y:n-40,width:50,height:50,opacity:.5,zIndex:3e3}],s=[{type:"image",src:"resources/corn_icon.png",x:t+25,y:n-40,width:50,height:50,opacity:.5,zIndex:3e3}],o=[{type:"image",src:"resources/cover_crop_icon.png",x:t,y:n,width:50,height:50,opacity:.5,zIndex:3e3}];this.bg=e.add(r),this.coverCrop=e.add(o),this.grass=e.add(i),this.corn=e.add(s)},showPopup:function(e,t){this.plantingClickResponder=e,this.plantingClickResponderScope=t;var n=function(e,t,n){e.show(!0),e.cropTypeClickValue=n,e.on({mouseover:t.onMouseOver,mouseout:t.onMouseOut,scope:e}),e.on({click:t.onClick,scope:t}),e.setAttributes({scale:{x:1,y:1},opacity:.5},!0)};this.bg[0].show(!0),this.bg[1].show(!0),this.bg[2].show(!0),this.bg[2].cropTypeClickValue="cancel",this.bg[2].on({mouseout:this.onPopupMouseOut,click:this.onClick,scope:this}),n(this.coverCrop[0],this,"cover"),n(this.grass[0],this,"grass"),n(this.corn[0],this,"corn")},hidePopup:function(){this.bg[0].hide(!0),this.bg[1].hide(!0),this.bg[2].hide(!0).clearListeners(),this.coverCrop[0].hide(!0).clearListeners(),this.grass[0].hide(!0).clearListeners(),this.corn[0].hide(!0).clearListeners()},onMouseOver:function(e,t){this.stopAnimation().animate({duration:100,to:{scale:{x:1.1,y:1.1},opacity:1}})},onMouseOut:function(e,t){this.stopAnimation().animate({duration:60,to:{scale:{x:1,y:1},opacity:.5}})},onPopupMouseOut:function(e,t){this.plantingClickResponder.call(this.plantingClickResponderScope,"cancel"),this.hidePopup()},onClick:function(e,t){this.plantingClickResponder.call(this.plantingClickResponderScope,e.cropTypeClickValue),this.hidePopup()}});
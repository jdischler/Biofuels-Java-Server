/*
 * File: BiofuelsGlobal/view/MainViewport.js
 */
Ext.onReady(function(){var e=Ext.create("BiofuelsGlobal.view.JoinGamePopup");e.show()}),Ext.define("BiofuelsGlobal.view.MainViewport",{extend:"Ext.container.Viewport",requires:["BiofuelsGlobal.view.JoinGamePopup","BiofuelsGlobal.view.NetworkLayer"],title:"My Window",autoScroll:!0,width:800,height:600,initNetworkEvents:function(){var e=BiofuelsGlobal;e.network.registerListener("farmerList",this.updateFarmerList,this)},updateFarmerList:function(e){this.farmerListStore.loadRawData(e,!1);var t=this.getComponent("panel1").getComponent("roomName"),n=this.getComponent("panel1").getComponent("password");t.setValue(BiofuelsGlobal.roomInformation.roomName),n.setValue(BiofuelsGlobal.roomInformation.password)},configFarmerStore:function(){this.farmerListStore=Ext.create("Ext.data.Store",{storeId:"farmerListStore",fields:["name","ready"],proxy:{type:"memory",reader:{type:"json",root:"farmers"}}})},initComponent:function(){var e=this;BiofuelsGlobal.network=Ext.create("BiofuelsGlobal.view.NetworkLayer"),BiofuelsGlobal.network.openSocket("localhost",8080,"/BiofuelsGame/serverConnect"),this.initNetworkEvents(),this.configFarmerStore(),Ext.applyIf(e,{items:[{xtype:"panel",itemId:"panel1",width:800,height:600,layout:{type:"absolute"},title:"BioFarmerVille",titleAlign:"center",items:[{xtype:"gridpanel",itemId:"farmerList",store:"farmerListStore",x:10,y:10,height:550,width:170,title:"Farmers",titleAlign:"center",columns:[{xtype:"gridcolumn",width:120,resizable:!1,dataIndex:"name",hideable:!1,text:"Name"},{xtype:"booleancolumn",width:48,resizable:!1,dataIndex:"ready",hideable:!1,text:"Ready",falseText:"no",trueText:"yes"}],viewConfig:{}},{xtype:"panel",x:190,y:10,height:80,width:440,title:"Round Progress",titleAlign:"center"},{xtype:"textfield",itemId:"roomName",x:630,y:10,width:160,fieldLabel:"Room",labelAlign:"right",labelWidth:80},{xtype:"textfield",itemId:"password",x:630,y:40,width:160,fieldLabel:"Password",labelAlign:"right",labelWidth:80}]}]}),e.callParent(arguments)}});